<!DOCTYPE html>
<html ng-app="exampleApp">
<head>

  <!-- Latest compiled and minified CSS -->
<!--   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"> -->

  <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/css/bootstrap.css" rel="stylesheet">

<script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.15/angular.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.13.0/ui-bootstrap-tpls.js"></script>
  <title>crateBuilder</title>

  <style>



    ul {
      list-style: none;
    }
    .media {
      display: table;
      width: 100%;
    }
    .media img {
      display: table-cell;
      max-width: 100%;
    }
    .media-details {
      padding-left: 1em;
      vertical-align: middle;
      display: table-cell;
      width: 90%;
    }
  </style>
</head>
<body ng-controller="MainController" data-ng-init="">
<div class="container">
  <ul class="list-group">
    <li class="list-group-item">
      <button ng-click="login()">Login with Spotify</button>
    </li>
    <li class="list-group-item">
      <button ng-click="getCurrentUser()">Get Current User</button>
    </li>
    <li class="list-group-item">
      <button ng-click="showUserPlaylists()">Get User Playlists</button>
    </li>
  </ul>
  <!-- <button ng-click="showPlaylistTracks()">Get tracks</button>
  <button ng-click="discogsQuery('fuck')">Discogs</button> -->
  
  <h1>{{ currentUser }}</h1>
  <!-- <h1>{{trackids}}</h1> -->
    <div class="playlist-details">
      <div>
        <accordion close-others="true">
          <accordion-group ng-repeat="items in userplaylist" heading="{{ userplaylist[$index].name }}" is-open="status.isFirstOpen" is-disabled="status.isFirstDisabled" ng-click="showPlaylistInfo(userplaylist[$index].id )">
          <table class="table">
            <tbody>
              <thead>
                <th>Artist</th>
                <th>Track Title</th>
                <th>Purchase</th>
              </thead>
              <tr ng-repeat="items in playlisttracks track by $index">
                <td>
                  {{ playlistartists.items[$index].track.artists[0].name }} 
                </td>
                <td>
                  {{ playlisttracks.items[$index].track.name }} 
                </td>
                <td>
                  <ul class="list-group">
                    <li class="list-group-item">
                      <button ng-click="discogsQuery(playlistartists.items[$index].track.artists[0].name, playlisttracks.items[$index].track.name)">Generate Purchase Link</button>
                    </li>
                    <li class="list-group-item">
                      <a href="http://{{ purchaseURL }}" target="_blank">Buy me</a>
                    </li>
                  </ul>
                </td>
              </tr>  
            </tbody>
          </table>
          </accordion-group>
        </accordion>
      </div>
    </div>
</div>
  
  <script src="../src/angular-spotify.js"></script>
  <script src="main.controller.js"></script>
</body>
</html>
